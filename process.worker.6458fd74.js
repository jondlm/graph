(()=>{function t(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,r,a,o,l,h,u,d,f,c=t._root,g={data:i},y=t._x0,_=t._y0,p=t._x1,x=t._y1;if(!c)return t._root=g,t;for(;c.length;)if((h=e>=(r=(y+p)/2))?y=r:p=r,(u=n>=(a=(_+x)/2))?_=a:x=a,s=c,!(c=c[d=u<<1|h]))return s[d]=g,t;if(o=+t._x.call(null,c.data),l=+t._y.call(null,c.data),e===o&&n===l)return g.next=c,s?s[d]=g:t._root=g,t;do s=s?s[d]=[,,,,]:t._root=[,,,,],(h=e>=(r=(y+p)/2))?y=r:p=r,(u=n>=(a=(_+x)/2))?_=a:x=a;while((d=u<<1|h)==(f=(l>=a)<<1|o>=r))return s[f]=c,s[d]=g,t}function e(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function n(t){return t[0]}function i(t){return t[1]}function s(t,e,s){var a=new r(null==e?n:e,null==s?i:s,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function r(t,e,n,i,s,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=r,this._root=void 0}function a(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var o,l,h,u=s.prototype=r.prototype;function d(t){return function(){return t}}function f(t){return(t()-.5)*1e-6}function c(t){return t.x+t.vx}function g(t){return t.y+t.vy}function y(t){return t.index}function _(t,e){var n=t.get(e);if(!n)throw Error("node not found: "+e);return n}u.copy=function(){var t,e,n=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=a(i),n;for(t=[{source:i,target:n._root=[,,,,]}];i=t.pop();)for(var s=0;s<4;++s)(e=i.source[s])&&(e.length?t.push({source:e,target:i.target[s]=[,,,,]}):i.target[s]=a(e));return n},u.add=function(e){let n=+this._x.call(null,e),i=+this._y.call(null,e);return t(this.cover(n,i),n,i,e)},u.addAll=function(e){var n,i,s,r,a=e.length,o=Array(a),l=Array(a),h=1/0,u=1/0,d=-1/0,f=-1/0;for(i=0;i<a;++i)!(isNaN(s=+this._x.call(null,n=e[i]))||isNaN(r=+this._y.call(null,n)))&&(o[i]=s,l[i]=r,s<h&&(h=s),s>d&&(d=s),r<u&&(u=r),r>f&&(f=r));if(h>d||u>f)return this;for(this.cover(h,u).cover(d,f),i=0;i<a;++i)t(this,o[i],l[i],e[i]);return this},u.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,r=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var a,o,l=s-n||1,h=this._root;n>t||t>=s||i>e||e>=r;)switch(o=(e<i)<<1|t<n,(a=[,,,,])[o]=h,h=a,l*=2,o){case 0:s=n+l,r=i+l;break;case 1:n=s-l,r=i+l;break;case 2:s=n+l,i=r-l;break;case 3:n=s-l,i=r-l}this._root&&this._root.length&&(this._root=h)}return this._x0=n,this._y0=i,this._x1=s,this._y1=r,this},u.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},u.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},u.find=function(t,n,i){var s,r,a,o,l,h,u,d=this._x0,f=this._y0,c=this._x1,g=this._y1,y=[],_=this._root;for(_&&y.push(new e(_,d,f,c,g)),null==i?i=1/0:(d=t-i,f=n-i,c=t+i,g=n+i,i*=i);h=y.pop();)if((_=h.node)&&!((r=h.x0)>c)&&!((a=h.y0)>g)&&!((o=h.x1)<d)&&!((l=h.y1)<f)){if(_.length){var p=(r+o)/2,x=(a+l)/2;y.push(new e(_[3],p,x,o,l),new e(_[2],r,x,p,l),new e(_[1],p,a,o,x),new e(_[0],r,a,p,x)),(u=(n>=x)<<1|t>=p)&&(h=y[y.length-1],y[y.length-1]=y[y.length-1-u],y[y.length-1-u]=h)}else{var v=t-+this._x.call(null,_.data),N=n-+this._y.call(null,_.data),m=v*v+N*N;if(m<i){var S=Math.sqrt(i=m);d=t-S,f=n-S,c=t+S,g=n+S,s=_.data}}}return s},u.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,s,r,a,o,l,h,u,d,f,c=this._root,g=this._x0,y=this._y0,_=this._x1,p=this._y1;if(!c)return this;if(c.length)for(;;){if((h=r>=(o=(g+_)/2))?g=o:_=o,(u=a>=(l=(y+p)/2))?y=l:p=l,e=c,!(c=c[d=u<<1|h]))return this;if(!c.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,f=d)}for(;c.data!==t;)if(i=c,!(c=c.next))return this;return((s=c.next)&&delete c.next,i)?(s?i.next=s:delete i.next,this):e?(s?e[d]=s:delete e[d],(c=e[0]||e[1]||e[2]||e[3])&&c===(e[3]||e[2]||e[1]||e[0])&&!c.length&&(n?n[f]=c:this._root=c),this):(this._root=s,this)},u.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},u.root=function(){return this._root},u.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},u.visit=function(t){var n,i,s,r,a,o,l=[],h=this._root;for(h&&l.push(new e(h,this._x0,this._y0,this._x1,this._y1));n=l.pop();)if(!t(h=n.node,s=n.x0,r=n.y0,a=n.x1,o=n.y1)&&h.length){var u=(s+a)/2,d=(r+o)/2;(i=h[3])&&l.push(new e(i,u,d,a,o)),(i=h[2])&&l.push(new e(i,s,d,u,o)),(i=h[1])&&l.push(new e(i,u,r,a,d)),(i=h[0])&&l.push(new e(i,s,r,u,d))}return this},u.visitAfter=function(t){var n,i=[],s=[];for(this._root&&i.push(new e(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var r=n.node;if(r.length){var a,o=n.x0,l=n.y0,h=n.x1,u=n.y1,d=(o+h)/2,f=(l+u)/2;(a=r[0])&&i.push(new e(a,o,l,d,f)),(a=r[1])&&i.push(new e(a,d,l,h,f)),(a=r[2])&&i.push(new e(a,o,f,d,u)),(a=r[3])&&i.push(new e(a,d,f,h,u))}s.push(n)}for(;n=s.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},u.x=function(t){return arguments.length?(this._x=t,this):this._x},u.y=function(t){return arguments.length?(this._y=t,this):this._y};var p={value:()=>{}};function x(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw Error("illegal type: "+t);i[t]=[]}return new v(i)}function v(t){this._=t}function N(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=p,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}v.prototype=x.prototype={constructor:v,on:function(t,e){var n,i=this._,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),r=-1,a=s.length;if(arguments.length<2){for(;++r<a;)if((n=(t=s[r]).type)&&(n=function(t,e){for(var n,i=0,s=t.length;i<s;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++r<a;)if(n=(t=s[r]).type)i[n]=N(i[n],t.name,e);else if(null==e)for(n in i)i[n]=N(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new v(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,s=Array(n),r=0;r<n;++r)s[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(i=this._[t],r=0,n=i.length;r<n;++r)i[r].value.apply(e,s)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)}};var m,S,D=0,I=0,A=0,w=0,E=0,T=0,b="object"==typeof performance&&performance.now?performance:Date,M="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function k(){return E||(M(O),E=b.now()+T)}function O(){E=0}function U(){this._call=this._time=this._next=null}function R(t,e,n){var i=new U;return i.restart(t,e,n),i}function P(){E=(w=b.now())+T,D=I=0;try{!function(){k(),++D;for(var t,e=m;e;)(t=E-e._time)>=0&&e._call.call(void 0,t),e=e._next;--D}()}finally{D=0,function(){for(var t,e,n=m,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:m=e);S=t,L(i)}(),E=0}}function B(){var t=b.now(),e=t-w;e>1e3&&(T-=e,w=t)}function L(t){!D&&(I&&(I=clearTimeout(I)),t-E>24?(t<1/0&&(I=setTimeout(P,t-b.now()-T)),A&&(A=clearInterval(A))):(A||(w=b.now(),A=setInterval(B,1e3)),D=1,M(P)))}function G(t){return t.x}function z(t){return t.y}U.prototype=R.prototype={constructor:U,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?k():+n)+(null==e?0:+e),this._next||S===this||(S?S._next=this:m=this,S=this),this._call=t,this._time=n,L()},stop:function(){this._call&&(this._call=null,this._time=1/0,L())}};var F=Math.PI*(3-Math.sqrt(5));class q{constructor(){this._listeners=new Map}once(t,e){let n={callable:e,isOnce:!0},i=this._listeners.get(t);return i?i.push(n):this._listeners.set(t,[n]),this}on(t,e){let n={callable:e},i=this._listeners.get(t);return i?i.push(n):this._listeners.set(t,[n]),this}off(t,e){let n=this._listeners.get(t);if(n){let i=n.filter(t=>t.callable!==e);this._listeners.set(t,i)}return this}emit(t,e){let n=this._listeners.get(t);if(!n||0===n.length)return!1;let i=!1;for(let t=0;t<n.length;t++)n[t].isOnce&&(i=!0),n[t].callable(e);if(i){let e=n.filter(t=>!t.isOnce);this._listeners.set(t,e)}return!0}eventNames(){return[...this._listeners.keys()]}listenerCount(t){let e=this._listeners.get(t);return e?e.length:0}listeners(t){let e=this._listeners.get(t);return e?e.map(t=>t.callable):[]}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}removeAllListeners(t){return t?this._listeners.delete(t):this._listeners.clear(),this}}let j=t=>t instanceof Date,C=t=>Array.isArray(t),Y=t=>null!==t&&"object"==typeof t&&"Object"===t.constructor.name,X=t=>j(t)?H(t):C(t)?J(t):Y(t)?Q(t):t,K=(t,e)=>{let n=j(t),i=j(e);if(n&&!i||!n&&i)return!1;if(n&&i)return t.getTime()===e.getTime();let s=C(t),r=C(e);if(s&&!r||!s&&r)return!1;if(s&&r)return t.length===e.length&&t.every((t,n)=>K(t,e[n]));let a=Y(t),o=Y(e);if(a&&!o||!a&&o)return!1;if(a&&o){let n=Object.keys(t),i=Object.keys(e);return!!K(n,i)&&n.every(n=>K(t[n],e[n]))}return t===e},H=t=>new Date(t),J=t=>t.map(t=>X(t)),Q=t=>{let e={};return Object.keys(t).forEach(n=>{e[n]=X(t[n])}),e};!function(t){t.TICK="tick",t.END="end",t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.SETTINGS_UPDATE="settings-update"}(o||(o={}));let V={isPhysicsEnabled:!1,alpha:{alpha:1,alphaMin:.001,alphaDecay:.0228,alphaTarget:.1},centering:{x:0,y:0,strength:1},collision:{radius:15,strength:1,iterations:1},links:{distance:30,strength:void 0,iterations:1},manyBody:{strength:-100,theta:.9,distanceMin:0,distanceMax:3e3},positioning:{forceX:{x:0,strength:.1},forceY:{y:0,strength:.1}}},W=t=>{t.fx=t.x,t.fy=t.y},Z=t=>{t.fx=null,t.fy=null};!function(t){t.SetData="Set Data",t.AddData="Add Data",t.UpdateData="Update Data",t.ClearData="Clear Data",t.Simulate="Simulate",t.ActivateSimulation="Activate Simulation",t.StartSimulation="Start Simulation",t.UpdateSimulation="Update Simulation",t.StopSimulation="Stop Simulation",t.StartDragNode="Start Drag Node",t.DragNode="Drag Node",t.EndDragNode="End Drag Node",t.FixNodes="Fix Nodes",t.ReleaseNodes="Release Nodes",t.SetSettings="Set Settings"}(l||(l={})),function(t){t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.SETTINGS_UPDATE="settings-update"}(h||(h={}));let $=new class extends q{constructor(t){super(),this._edges=[],this._nodes=[],this._nodeIndexByNodeId={},this._isDragging=!1,this._isStabilizing=!1,this.linkForce=(function(t){var e,n,i,s,r,a,o=y,l=function(t){return 1/Math.min(s[t.source.index],s[t.target.index])},h=d(30),u=1;function c(i){for(var s=0,o=t.length;s<u;++s)for(var l,h,d,c,g,y,_,p=0;p<o;++p)h=(l=t[p]).source,y=((y=Math.sqrt((c=(d=l.target).x+d.vx-h.x-h.vx||f(a))*c+(g=d.y+d.vy-h.y-h.vy||f(a))*g))-n[p])/y*i*e[p],c*=y,g*=y,d.vx-=c*(_=r[p]),d.vy-=g*_,h.vx+=c*(_=1-_),h.vy+=g*_}function g(){if(i){var a,l,h=i.length,u=t.length,d=new Map(i.map((t,e)=>[o(t,e,i),t]));for(a=0,s=Array(h);a<u;++a)(l=t[a]).index=a,"object"!=typeof l.source&&(l.source=_(d,l.source)),"object"!=typeof l.target&&(l.target=_(d,l.target)),s[l.source.index]=(s[l.source.index]||0)+1,s[l.target.index]=(s[l.target.index]||0)+1;for(a=0,r=Array(u);a<u;++a)l=t[a],r[a]=s[l.source.index]/(s[l.source.index]+s[l.target.index]);e=Array(u),p(),n=Array(u),x()}}function p(){if(i)for(var n=0,s=t.length;n<s;++n)e[n]=+l(t[n],n,t)}function x(){if(i)for(var e=0,s=t.length;e<s;++e)n[e]=+h(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){i=t,a=e,g()},c.links=function(e){return arguments.length?(t=e,g(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(l="function"==typeof t?t:d(+t),p(),c):l},c.distance=function(t){return arguments.length?(h="function"==typeof t?t:d(+t),x(),c):h},c})(this._edges).id(t=>t.id),this.simulation=(function(t){let e;var n,i=1,s=.001,r=1-Math.pow(.001,1/300),a=0,o=.6,l=new Map,h=R(f),u=x("tick","end"),d=(e=1,()=>(e=(1664525*e+1013904223)%4294967296)/4294967296);function f(){c(),u.call("tick",n),i<s&&(h.stop(),u.call("end",n))}function c(e){var s,h,u=t.length;void 0===e&&(e=1);for(var d=0;d<e;++d)for(i+=(a-i)*r,l.forEach(function(t){t(i)}),s=0;s<u;++s)null==(h=t[s]).fx?h.x+=h.vx*=o:(h.x=h.fx,h.vx=0),null==h.fy?h.y+=h.vy*=o:(h.y=h.fy,h.vy=0);return n}function g(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var s=10*Math.sqrt(.5+n),r=n*F;e.x=s*Math.cos(r),e.y=s*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function y(e){return e.initialize&&e.initialize(t,d),e}return null==t&&(t=[]),g(),n={tick:c,restart:function(){return h.restart(f),n},stop:function(){return h.stop(),n},nodes:function(e){return arguments.length?(t=e,g(),l.forEach(y),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(s=+t,n):s},alphaDecay:function(t){return arguments.length?(r=+t,n):+r},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(o=1-t,n):1-o},randomSource:function(t){return arguments.length?(d=t,l.forEach(y),n):d},force:function(t,e){return arguments.length>1?(null==e?l.delete(t):l.set(t,y(e)),n):l.get(t)},find:function(e,n,i){var s,r,a,o,l,h=0,u=t.length;for(null==i?i=1/0:i*=i,h=0;h<u;++h)(a=(s=e-(o=t[h]).x)*s+(r=n-o.y)*r)<i&&(l=o,i=a);return l},on:function(t,e){return arguments.length>1?(u.on(t,e),n):u.on(t)}}})(this._nodes).force("link",this.linkForce).stop(),this.settings=Object.assign(X(V),t),this.initSimulation(this.settings),this.simulation.on("tick",()=>{this.emit(o.TICK,{nodes:this._nodes,edges:this._edges})}),this.simulation.on("end",()=>{this._isDragging=!1,this._isStabilizing=!1,this.emit(o.END,{nodes:this._nodes,edges:this._edges})})}getSettings(){return X(this.settings)}setSettings(t){let e=this.getSettings();Object.keys(t).forEach(e=>{this.settings[e]=t[e]}),K(this.settings,e)||(this.initSimulation(t),this.emit(o.SETTINGS_UPDATE,{settings:this.settings}),this.runSimulation({isUpdatingSettings:!0}))}startDragNode(){this._isDragging=!0,!this._isStabilizing&&this.settings.isPhysicsEnabled&&this.activateSimulation()}dragNode(t){let e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&(this._isDragging||this.startDragNode(),e.fx=t.x,e.fy=t.y,this.settings.isPhysicsEnabled||(e.x=t.x,e.y=t.y,this.emit(o.NODE_DRAG,{nodes:this._nodes,edges:this._edges})))}endDragNode(t){this._isDragging=!1,this.simulation.alphaTarget(0);let e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&this.settings.isPhysicsEnabled&&Z(e)}activateSimulation(){this.settings.isPhysicsEnabled&&(this.simulation.alphaTarget(this.settings.alpha.alphaTarget).restart(),this.releaseNodes())}fixDefinedNodes(t){for(let e=0;e<t.nodes.length;e++)null!==t.nodes[e].x&&void 0!==t.nodes[e].x&&(t.nodes[e].fx=t.nodes[e].x),null!==t.nodes[e].y&&void 0!==t.nodes[e].y&&(t.nodes[e].fy=t.nodes[e].y);return t}addData(t){t=this.fixDefinedNodes(t),this._nodes.concat(t.nodes),this._edges.concat(t.edges),this.setNodeIndexByNodeId()}clearData(){this._nodes=[],this._edges=[],this.setNodeIndexByNodeId()}setData(t){t=this.fixDefinedNodes(t),this.clearData(),this.addData(t)}updateData(t){t=this.fixDefinedNodes(t);let e=new Set(t.nodes.map(t=>t.id)),n=this._nodes.filter(t=>e.has(t.id)),i=t.nodes.filter(t=>void 0===this._nodeIndexByNodeId[t.id]);this._nodes=[...n,...i],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges)}simulate(){this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation(),this.settings.isPhysicsEnabled||this.fixNodes()}startSimulation(t){this.setData(t),this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation()}updateSimulation(t){let e=new Set(t.nodes.map(t=>t.id)),n=t.nodes.filter(t=>void 0===this._nodeIndexByNodeId[t.id]),i=this._nodes.filter(t=>e.has(t.id));if(this.settings.isPhysicsEnabled||i.forEach(t=>W(t)),this._nodes=[...i,...n],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),!this.settings.isPhysicsEnabled&&!n.length){this.emit(o.SIMULATION_END,{nodes:this._nodes,edges:this._edges});return}this.runSimulation({isUpdatingSettings:!0})}stopSimulation(){this.simulation.stop(),this._nodes=[],this._edges=[],this.setNodeIndexByNodeId(),this.simulation.nodes(),this.linkForce.links()}initSimulation(t){var e,n,i,r;if(t.alpha&&this.simulation.alpha(t.alpha.alpha).alphaMin(t.alpha.alphaMin).alphaDecay(t.alpha.alphaDecay).alphaTarget(t.alpha.alphaTarget),t.links&&this.linkForce.distance(t.links.distance).iterations(t.links.iterations),t.collision){let e=(function(t){var e,n,i,r=1,a=1;function o(){for(var t,o,h,u,d,y,_,p=e.length,x=0;x<a;++x)for(t=0,o=s(e,c,g).visitAfter(l);t<p;++t)_=(y=n[(h=e[t]).index])*y,u=h.x+h.vx,d=h.y+h.vy,o.visit(v);function v(t,e,n,s,a){var o=t.data,l=t.r,c=y+l;if(o){if(o.index>h.index){var g=u-o.x-o.vx,p=d-o.y-o.vy,x=g*g+p*p;x<c*c&&(0===g&&(x+=(g=f(i))*g),0===p&&(x+=(p=f(i))*p),x=(c-(x=Math.sqrt(x)))/x*r,h.vx+=(g*=x)*(c=(l*=l)/(_+l)),h.vy+=(p*=x)*c,o.vx-=g*(c=1-c),o.vy-=p*c)}return}return e>u+c||s<u-c||n>d+c||a<d-c}}function l(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function h(){if(e){var i,s,r=e.length;for(i=0,n=Array(r);i<r;++i)n[(s=e[i]).index]=+t(s,i,e)}}return"function"!=typeof t&&(t=d(null==t?1:+t)),o.initialize=function(t,n){e=t,i=n,h()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),h(),o):t},o})().radius(t.collision.radius).strength(t.collision.strength).iterations(t.collision.iterations);this.simulation.force("collide",e)}if(null===t.collision&&this.simulation.force("collide",null),t.manyBody){let e=(function(){var t,e,n,i,r,a=d(-30),o=1,l=1/0,h=.81;function u(n){var r,a=t.length,o=s(t,G,z).visitAfter(g);for(i=n,r=0;r<a;++r)e=t[r],o.visit(y)}function c(){if(t){var e,n,i=t.length;for(e=0,r=Array(i);e<i;++e)r[(n=t[e]).index]=+a(n,e,t)}}function g(t){var e,n,i,s,a,o=0,l=0;if(t.length){for(i=s=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,i+=n*e.x,s+=n*e.y);t.x=i/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do o+=r[e.data.index];while(e=e.next)}t.value=o}function y(t,s,a,u){if(!t.value)return!0;var d=t.x-e.x,c=t.y-e.y,g=u-s,y=d*d+c*c;if(g*g/h<y)return y<l&&(0===d&&(y+=(d=f(n))*d),0===c&&(y+=(c=f(n))*c),y<o&&(y=Math.sqrt(o*y)),e.vx+=d*t.value*i/y,e.vy+=c*t.value*i/y),!0;if(!t.length&&!(y>=l)){(t.data!==e||t.next)&&(0===d&&(y+=(d=f(n))*d),0===c&&(y+=(c=f(n))*c),y<o&&(y=Math.sqrt(o*y)));do t.data!==e&&(g=r[t.data.index]*i/y,e.vx+=d*g,e.vy+=c*g);while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:d(+t),c(),u):a},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u.theta=function(t){return arguments.length?(h=t*t,u):Math.sqrt(h)},u})().strength(t.manyBody.strength).theta(t.manyBody.theta).distanceMin(t.manyBody.distanceMin).distanceMax(t.manyBody.distanceMax);this.simulation.force("charge",e)}if(null===t.manyBody&&this.simulation.force("charge",null),null===(e=t.positioning)||void 0===e?void 0:e.forceY){let e=(function(t){var e,n,i,s=d(.1);function r(t){for(var s,r=0,a=e.length;r<a;++r)s=e[r],s.vx+=(i[r]-s.x)*n[r]*t}function a(){if(e){var r,a=e.length;for(r=0,n=Array(a),i=Array(a);r<a;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+s(e[r],r,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),r.initialize=function(t){e=t,a()},r.strength=function(t){return arguments.length?(s="function"==typeof t?t:d(+t),a(),r):s},r.x=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a(),r):t},r})(t.positioning.forceX.x).strength(t.positioning.forceX.strength);this.simulation.force("x",e)}if((null===(n=t.positioning)||void 0===n?void 0:n.forceX)===null&&this.simulation.force("x",null),null===(i=t.positioning)||void 0===i?void 0:i.forceY){let e=(function(t){var e,n,i,s=d(.1);function r(t){for(var s,r=0,a=e.length;r<a;++r)s=e[r],s.vy+=(i[r]-s.y)*n[r]*t}function a(){if(e){var r,a=e.length;for(r=0,n=Array(a),i=Array(a);r<a;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+s(e[r],r,e)}}return"function"!=typeof t&&(t=d(null==t?0:+t)),r.initialize=function(t){e=t,a()},r.strength=function(t){return arguments.length?(s="function"==typeof t?t:d(+t),a(),r):s},r.y=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a(),r):t},r})(t.positioning.forceY.y).strength(t.positioning.forceY.strength);this.simulation.force("y",e)}if((null===(r=t.positioning)||void 0===r?void 0:r.forceY)===null&&this.simulation.force("y",null),t.centering){let e=(function(t,e){var n,i=1;function s(){var s,r,a=n.length,o=0,l=0;for(s=0;s<a;++s)o+=(r=n[s]).x,l+=r.y;for(o=(o/a-t)*i,l=(l/a-e)*i,s=0;s<a;++s)r=n[s],r.x-=o,r.y-=l}return null==t&&(t=0),null==e&&(e=0),s.initialize=function(t){n=t},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(t){return arguments.length?(e=+t,s):e},s.strength=function(t){return arguments.length?(i=+t,s):i},s})(t.centering.x,t.centering.y).strength(t.centering.strength);this.simulation.force("center",e)}null===t.centering&&this.simulation.force("center",null)}runSimulation(t){if(this._isStabilizing)return;(this.settings.isPhysicsEnabled||(null==t?void 0:t.isUpdatingSettings))&&this.releaseNodes(),this.emit(o.SIMULATION_START,void 0),this._isStabilizing=!0,this.simulation.alpha(this.settings.alpha.alpha).alphaTarget(this.settings.alpha.alphaTarget).stop();let e=Math.ceil(Math.log(this.settings.alpha.alphaMin)/Math.log(1-this.settings.alpha.alphaDecay)),n=-1;for(let t=0;t<e;t++){let i=Math.round(100*t/e);i>n&&(n=i,this.emit(o.SIMULATION_PROGRESS,{nodes:this._nodes,edges:this._edges,progress:i/100})),this.simulation.tick()}this.settings.isPhysicsEnabled||this.fixNodes(),this._isStabilizing=!1,this.emit(o.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}setNodeIndexByNodeId(){this._nodeIndexByNodeId={};for(let t=0;t<this._nodes.length;t++)this._nodeIndexByNodeId[this._nodes[t].id]=t}fixNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)W(this._nodes[e])}releaseNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)Z(this._nodes[e])}},tt=t=>{postMessage(t)};$.on(o.TICK,t=>{tt({type:h.NODE_DRAG,data:t})}),$.on(o.END,t=>{tt({type:h.NODE_DRAG_END,data:t})}),$.on(o.SIMULATION_START,()=>{tt({type:h.SIMULATION_START})}),$.on(o.SIMULATION_PROGRESS,t=>{tt({type:h.SIMULATION_PROGRESS,data:t})}),$.on(o.SIMULATION_END,t=>{tt({type:h.SIMULATION_END,data:t})}),$.on(o.NODE_DRAG,t=>{tt({type:h.NODE_DRAG,data:t})}),$.on(o.SETTINGS_UPDATE,t=>{tt({type:h.SETTINGS_UPDATE,data:t})}),addEventListener("message",({data:t})=>{switch(t.type){case l.ActivateSimulation:$.activateSimulation();break;case l.SetData:$.setData(t.data);break;case l.AddData:$.addData(t.data);break;case l.UpdateData:$.updateData(t.data);break;case l.ClearData:$.clearData();break;case l.Simulate:$.simulate();break;case l.StartSimulation:$.startSimulation(t.data);break;case l.UpdateSimulation:$.updateSimulation(t.data);break;case l.StopSimulation:$.stopSimulation();break;case l.StartDragNode:$.startDragNode();break;case l.DragNode:$.dragNode(t.data);break;case l.FixNodes:$.fixNodes(t.data.nodes);break;case l.ReleaseNodes:$.releaseNodes(t.data.nodes);break;case l.EndDragNode:$.endDragNode(t.data);break;case l.SetSettings:$.setSettings(t.data)}})})();
//# sourceMappingURL=process.worker.6458fd74.js.map
