(()=>{function t(t){return function(){return t}}function e(t){return(t()-.5)*1e-6}function n(t){return t.index}function i(t,e){var n=t.get(e);if(!n)throw Error("node not found: "+e);return n}var s,r,a,o={value:()=>{}};function l(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw Error("illegal type: "+t);i[t]=[]}return new h(i)}function h(t){this._=t}function u(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=o,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}h.prototype=l.prototype={constructor:h,on:function(t,e){var n,i=this._,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),r=-1,a=s.length;if(arguments.length<2){for(;++r<a;)if((n=(t=s[r]).type)&&(n=function(t,e){for(var n,i=0,s=t.length;i<s;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++r<a;)if(n=(t=s[r]).type)i[n]=u(i[n],t.name,e);else if(null==e)for(n in i)i[n]=u(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new h(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,s=Array(n),r=0;r<n;++r)s[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(i=this._[t],r=0,n=i.length;r<n;++r)i[r].value.apply(e,s)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var i=this._[t],s=0,r=i.length;s<r;++s)i[s].value.apply(e,n)}};var d,f,c=0,g=0,y=0,_=0,p=0,x=0,v="object"==typeof performance&&performance.now?performance:Date,N="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function m(){return p||(N(S),p=v.now()+x)}function S(){p=0}function D(){this._call=this._time=this._next=null}function I(t,e,n){var i=new D;return i.restart(t,e,n),i}function A(){p=(_=v.now())+x,c=g=0;try{!function(){m(),++c;for(var t,e=d;e;)(t=p-e._time)>=0&&e._call.call(void 0,t),e=e._next;--c}()}finally{c=0,function(){for(var t,e,n=d,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:d=e);f=t,E(i)}(),p=0}}function w(){var t=v.now(),e=t-_;e>1e3&&(x-=e,_=t)}function E(t){!c&&(g&&(g=clearTimeout(g)),t-p>24?(t<1/0&&(g=setTimeout(A,t-v.now()-x)),y&&(y=clearInterval(y))):(y||(_=v.now(),y=setInterval(w,1e3)),c=1,N(A)))}function T(t){return t.x}function b(t){return t.y}D.prototype=I.prototype={constructor:D,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?m():+n)+(null==e?0:+e),this._next||f===this||(f?f._next=this:d=this,f=this),this._call=t,this._time=n,E()},stop:function(){this._call&&(this._call=null,this._time=1/0,E())}};var M=Math.PI*(3-Math.sqrt(5));function k(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,r,a,o,l,h,u,d,f,c=t._root,g={data:i},y=t._x0,_=t._y0,p=t._x1,x=t._y1;if(!c)return t._root=g,t;for(;c.length;)if((h=e>=(r=(y+p)/2))?y=r:p=r,(u=n>=(a=(_+x)/2))?_=a:x=a,s=c,!(c=c[d=u<<1|h]))return s[d]=g,t;if(o=+t._x.call(null,c.data),l=+t._y.call(null,c.data),e===o&&n===l)return g.next=c,s?s[d]=g:t._root=g,t;do s=s?s[d]=[,,,,]:t._root=[,,,,],(h=e>=(r=(y+p)/2))?y=r:p=r,(u=n>=(a=(_+x)/2))?_=a:x=a;while((d=u<<1|h)==(f=(l>=a)<<1|o>=r))return s[f]=c,s[d]=g,t}function O(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function U(t){return t[0]}function R(t){return t[1]}function P(t,e,n){var i=new B(null==e?U:e,null==n?R:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function B(t,e,n,i,s,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=r,this._root=void 0}function L(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var G=P.prototype=B.prototype;function z(t){return t.x+t.vx}function F(t){return t.y+t.vy}G.copy=function(){var t,e,n=new B(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=L(i),n;for(t=[{source:i,target:n._root=[,,,,]}];i=t.pop();)for(var s=0;s<4;++s)(e=i.source[s])&&(e.length?t.push({source:e,target:i.target[s]=[,,,,]}):i.target[s]=L(e));return n},G.add=function(t){let e=+this._x.call(null,t),n=+this._y.call(null,t);return k(this.cover(e,n),e,n,t)},G.addAll=function(t){var e,n,i,s,r=t.length,a=Array(r),o=Array(r),l=1/0,h=1/0,u=-1/0,d=-1/0;for(n=0;n<r;++n)!(isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e)))&&(a[n]=i,o[n]=s,i<l&&(l=i),i>u&&(u=i),s<h&&(h=s),s>d&&(d=s));if(l>u||h>d)return this;for(this.cover(l,h).cover(u,d),n=0;n<r;++n)k(this,a[n],o[n],t[n]);return this},G.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,r=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var a,o,l=s-n||1,h=this._root;n>t||t>=s||i>e||e>=r;)switch(o=(e<i)<<1|t<n,(a=[,,,,])[o]=h,h=a,l*=2,o){case 0:s=n+l,r=i+l;break;case 1:n=s-l,r=i+l;break;case 2:s=n+l,i=r-l;break;case 3:n=s-l,i=r-l}this._root&&this._root.length&&(this._root=h)}return this._x0=n,this._y0=i,this._x1=s,this._y1=r,this},G.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},G.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},G.find=function(t,e,n){var i,s,r,a,o,l,h,u=this._x0,d=this._y0,f=this._x1,c=this._y1,g=[],y=this._root;for(y&&g.push(new O(y,u,d,f,c)),null==n?n=1/0:(u=t-n,d=e-n,f=t+n,c=e+n,n*=n);l=g.pop();)if((y=l.node)&&!((s=l.x0)>f)&&!((r=l.y0)>c)&&!((a=l.x1)<u)&&!((o=l.y1)<d)){if(y.length){var _=(s+a)/2,p=(r+o)/2;g.push(new O(y[3],_,p,a,o),new O(y[2],s,p,_,o),new O(y[1],_,r,a,p),new O(y[0],s,r,_,p)),(h=(e>=p)<<1|t>=_)&&(l=g[g.length-1],g[g.length-1]=g[g.length-1-h],g[g.length-1-h]=l)}else{var x=t-+this._x.call(null,y.data),v=e-+this._y.call(null,y.data),N=x*x+v*v;if(N<n){var m=Math.sqrt(n=N);u=t-m,d=e-m,f=t+m,c=e+m,i=y.data}}}return i},G.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,s,r,a,o,l,h,u,d,f,c=this._root,g=this._x0,y=this._y0,_=this._x1,p=this._y1;if(!c)return this;if(c.length)for(;;){if((h=r>=(o=(g+_)/2))?g=o:_=o,(u=a>=(l=(y+p)/2))?y=l:p=l,e=c,!(c=c[d=u<<1|h]))return this;if(!c.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,f=d)}for(;c.data!==t;)if(i=c,!(c=c.next))return this;return((s=c.next)&&delete c.next,i)?(s?i.next=s:delete i.next,this):e?(s?e[d]=s:delete e[d],(c=e[0]||e[1]||e[2]||e[3])&&c===(e[3]||e[2]||e[1]||e[0])&&!c.length&&(n?n[f]=c:this._root=c),this):(this._root=s,this)},G.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},G.root=function(){return this._root},G.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},G.visit=function(t){var e,n,i,s,r,a,o=[],l=this._root;for(l&&o.push(new O(l,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(l=e.node,i=e.x0,s=e.y0,r=e.x1,a=e.y1)&&l.length){var h=(i+r)/2,u=(s+a)/2;(n=l[3])&&o.push(new O(n,h,u,r,a)),(n=l[2])&&o.push(new O(n,i,u,h,a)),(n=l[1])&&o.push(new O(n,h,s,r,u)),(n=l[0])&&o.push(new O(n,i,s,h,u))}return this},G.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new O(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var s=e.node;if(s.length){var r,a=e.x0,o=e.y0,l=e.x1,h=e.y1,u=(a+l)/2,d=(o+h)/2;(r=s[0])&&n.push(new O(r,a,o,u,d)),(r=s[1])&&n.push(new O(r,u,o,l,d)),(r=s[2])&&n.push(new O(r,a,d,u,h)),(r=s[3])&&n.push(new O(r,u,d,l,h))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},G.x=function(t){return arguments.length?(this._x=t,this):this._x},G.y=function(t){return arguments.length?(this._y=t,this):this._y};class q{constructor(){this._listeners=new Map}once(t,e){let n={callable:e,isOnce:!0},i=this._listeners.get(t);return i?i.push(n):this._listeners.set(t,[n]),this}on(t,e){let n={callable:e},i=this._listeners.get(t);return i?i.push(n):this._listeners.set(t,[n]),this}off(t,e){let n=this._listeners.get(t);if(n){let i=n.filter(t=>t.callable!==e);this._listeners.set(t,i)}return this}emit(t,e){let n=this._listeners.get(t);if(!n||0===n.length)return!1;let i=!1;for(let t=0;t<n.length;t++)n[t].isOnce&&(i=!0),n[t].callable(e);if(i){let e=n.filter(t=>!t.isOnce);this._listeners.set(t,e)}return!0}eventNames(){return[...this._listeners.keys()]}listenerCount(t){let e=this._listeners.get(t);return e?e.length:0}listeners(t){let e=this._listeners.get(t);return e?e.map(t=>t.callable):[]}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}removeAllListeners(t){return t?this._listeners.delete(t):this._listeners.clear(),this}}let j=t=>t instanceof Date,C=t=>Array.isArray(t),Y=t=>null!==t&&"object"==typeof t&&"Object"===t.constructor.name,X=t=>j(t)?H(t):C(t)?J(t):Y(t)?Q(t):t,K=(t,e)=>{let n=j(t),i=j(e);if(n&&!i||!n&&i)return!1;if(n&&i)return t.getTime()===e.getTime();let s=C(t),r=C(e);if(s&&!r||!s&&r)return!1;if(s&&r)return t.length===e.length&&t.every((t,n)=>K(t,e[n]));let a=Y(t),o=Y(e);if(a&&!o||!a&&o)return!1;if(a&&o){let n=Object.keys(t),i=Object.keys(e);return!!K(n,i)&&n.every(n=>K(t[n],e[n]))}return t===e},H=t=>new Date(t),J=t=>t.map(t=>X(t)),Q=t=>{let e={};return Object.keys(t).forEach(n=>{e[n]=X(t[n])}),e};!function(t){t.TICK="tick",t.END="end",t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.SETTINGS_UPDATE="settings-update"}(s||(s={}));let V={isPhysicsEnabled:!1,alpha:{alpha:1,alphaMin:.001,alphaDecay:.0228,alphaTarget:.1},centering:{x:0,y:0,strength:1},collision:{radius:15,strength:1,iterations:1},links:{distance:30,strength:void 0,iterations:1},manyBody:{strength:-100,theta:.9,distanceMin:0,distanceMax:3e3},positioning:{forceX:{x:0,strength:.1},forceY:{y:0,strength:.1}}},W=t=>{t.fx=t.x,t.fy=t.y},Z=t=>{t.fx=null,t.fy=null};!function(t){t.SetData="Set Data",t.AddData="Add Data",t.UpdateData="Update Data",t.ClearData="Clear Data",t.Simulate="Simulate",t.ActivateSimulation="Activate Simulation",t.StartSimulation="Start Simulation",t.UpdateSimulation="Update Simulation",t.StopSimulation="Stop Simulation",t.StartDragNode="Start Drag Node",t.DragNode="Drag Node",t.EndDragNode="End Drag Node",t.FixNodes="Fix Nodes",t.ReleaseNodes="Release Nodes",t.SetSettings="Set Settings"}(r||(r={})),function(t){t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.SETTINGS_UPDATE="settings-update"}(a||(a={}));let $=new class extends q{constructor(r){super(),this._edges=[],this._nodes=[],this._nodeIndexByNodeId={},this._isDragging=!1,this._isStabilizing=!1,this.linkForce=(function(s){var r,a,o,l,h,u,d=n,f=function(t){return 1/Math.min(l[t.source.index],l[t.target.index])},c=t(30),g=1;function y(t){for(var n=0,i=s.length;n<g;++n)for(var o,l,d,f,c,y,_,p=0;p<i;++p)l=(o=s[p]).source,y=((y=Math.sqrt((f=(d=o.target).x+d.vx-l.x-l.vx||e(u))*f+(c=d.y+d.vy-l.y-l.vy||e(u))*c))-a[p])/y*t*r[p],f*=y,c*=y,d.vx-=f*(_=h[p]),d.vy-=c*_,l.vx+=f*(_=1-_),l.vy+=c*_}function _(){if(o){var t,e,n=o.length,u=s.length,f=new Map(o.map((t,e)=>[d(t,e,o),t]));for(t=0,l=Array(n);t<u;++t)(e=s[t]).index=t,"object"!=typeof e.source&&(e.source=i(f,e.source)),"object"!=typeof e.target&&(e.target=i(f,e.target)),l[e.source.index]=(l[e.source.index]||0)+1,l[e.target.index]=(l[e.target.index]||0)+1;for(t=0,h=Array(u);t<u;++t)e=s[t],h[t]=l[e.source.index]/(l[e.source.index]+l[e.target.index]);r=Array(u),p(),a=Array(u),x()}}function p(){if(o)for(var t=0,e=s.length;t<e;++t)r[t]=+f(s[t],t,s)}function x(){if(o)for(var t=0,e=s.length;t<e;++t)a[t]=+c(s[t],t,s)}return null==s&&(s=[]),y.initialize=function(t,e){o=t,u=e,_()},y.links=function(t){return arguments.length?(s=t,_(),y):s},y.id=function(t){return arguments.length?(d=t,y):d},y.iterations=function(t){return arguments.length?(g=+t,y):g},y.strength=function(e){return arguments.length?(f="function"==typeof e?e:t(+e),p(),y):f},y.distance=function(e){return arguments.length?(c="function"==typeof e?e:t(+e),x(),y):c},y})(this._edges).id(t=>t.id),this.simulation=(function(t){let e;var n,i=1,s=.001,r=1-Math.pow(.001,1/300),a=0,o=.6,h=new Map,u=I(c),d=l("tick","end"),f=(e=1,()=>(e=(1664525*e+1013904223)%4294967296)/4294967296);function c(){g(),d.call("tick",n),i<s&&(u.stop(),d.call("end",n))}function g(e){var s,l,u=t.length;void 0===e&&(e=1);for(var d=0;d<e;++d)for(i+=(a-i)*r,h.forEach(function(t){t(i)}),s=0;s<u;++s)null==(l=t[s]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return n}function y(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var s=10*Math.sqrt(.5+n),r=n*M;e.x=s*Math.cos(r),e.y=s*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function _(e){return e.initialize&&e.initialize(t,f),e}return null==t&&(t=[]),y(),n={tick:g,restart:function(){return u.restart(c),n},stop:function(){return u.stop(),n},nodes:function(e){return arguments.length?(t=e,y(),h.forEach(_),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(s=+t,n):s},alphaDecay:function(t){return arguments.length?(r=+t,n):+r},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(o=1-t,n):1-o},randomSource:function(t){return arguments.length?(f=t,h.forEach(_),n):f},force:function(t,e){return arguments.length>1?(null==e?h.delete(t):h.set(t,_(e)),n):h.get(t)},find:function(e,n,i){var s,r,a,o,l,h=0,u=t.length;for(null==i?i=1/0:i*=i,h=0;h<u;++h)(a=(s=e-(o=t[h]).x)*s+(r=n-o.y)*r)<i&&(l=o,i=a);return l},on:function(t,e){return arguments.length>1?(d.on(t,e),n):d.on(t)}}})(this._nodes).force("link",this.linkForce).stop(),this.settings=Object.assign(X(V),r),this.initSimulation(this.settings),this.simulation.on("tick",()=>{this.emit(s.TICK,{nodes:this._nodes,edges:this._edges})}),this.simulation.on("end",()=>{this._isDragging=!1,this._isStabilizing=!1,this.emit(s.END,{nodes:this._nodes,edges:this._edges})})}getSettings(){return X(this.settings)}setSettings(t){let e=this.getSettings();Object.keys(t).forEach(e=>{this.settings[e]=t[e]}),K(this.settings,e)||(this.initSimulation(t),this.emit(s.SETTINGS_UPDATE,{settings:this.settings}),this.runSimulation({isUpdatingSettings:!0}))}startDragNode(){this._isDragging=!0,!this._isStabilizing&&this.settings.isPhysicsEnabled&&this.activateSimulation()}dragNode(t){let e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&(this._isDragging||this.startDragNode(),e.fx=t.x,e.fy=t.y,this.settings.isPhysicsEnabled||(e.x=t.x,e.y=t.y,this.emit(s.NODE_DRAG,{nodes:this._nodes,edges:this._edges})))}endDragNode(t){this._isDragging=!1,this.simulation.alphaTarget(0);let e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&this.settings.isPhysicsEnabled&&Z(e)}activateSimulation(){this.settings.isPhysicsEnabled&&(this.simulation.alphaTarget(this.settings.alpha.alphaTarget).restart(),this.releaseNodes())}fixDefinedNodes(t){for(let e=0;e<t.nodes.length;e++)null!==t.nodes[e].x&&void 0!==t.nodes[e].x&&(t.nodes[e].fx=t.nodes[e].x),null!==t.nodes[e].y&&void 0!==t.nodes[e].y&&(t.nodes[e].fy=t.nodes[e].y);return t}addData(t){t=this.fixDefinedNodes(t),this._nodes.concat(t.nodes),this._edges.concat(t.edges),this.setNodeIndexByNodeId()}clearData(){this._nodes=[],this._edges=[],this.setNodeIndexByNodeId()}setData(t){t=this.fixDefinedNodes(t),this.clearData(),this.addData(t)}updateData(t){t=this.fixDefinedNodes(t);let e=new Set(t.nodes.map(t=>t.id)),n=this._nodes.filter(t=>e.has(t.id)),i=t.nodes.filter(t=>void 0===this._nodeIndexByNodeId[t.id]);this._nodes=[...n,...i],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges)}simulate(){this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation(),this.settings.isPhysicsEnabled||this.fixNodes()}startSimulation(t){this.setData(t),this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation()}updateSimulation(t){let e=new Set(t.nodes.map(t=>t.id)),n=t.nodes.filter(t=>void 0===this._nodeIndexByNodeId[t.id]),i=this._nodes.filter(t=>e.has(t.id));if(this.settings.isPhysicsEnabled||i.forEach(t=>W(t)),this._nodes=[...i,...n],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),!this.settings.isPhysicsEnabled&&!n.length){this.emit(s.SIMULATION_END,{nodes:this._nodes,edges:this._edges});return}this.runSimulation({isUpdatingSettings:!0})}stopSimulation(){this.simulation.stop(),this._nodes=[],this._edges=[],this.setNodeIndexByNodeId(),this.simulation.nodes(),this.linkForce.links()}initSimulation(n){var i,s,r,a;if(n.alpha&&this.simulation.alpha(n.alpha.alpha).alphaMin(n.alpha.alphaMin).alphaDecay(n.alpha.alphaDecay).alphaTarget(n.alpha.alphaTarget),n.links&&this.linkForce.distance(n.links.distance).iterations(n.links.iterations),n.collision){let i=(function(n){var i,s,r,a=1,o=1;function l(){for(var t,n,l,u,d,f,c,g=i.length,y=0;y<o;++y)for(t=0,n=P(i,z,F).visitAfter(h);t<g;++t)c=(f=s[(l=i[t]).index])*f,u=l.x+l.vx,d=l.y+l.vy,n.visit(_);function _(t,n,i,s,o){var h=t.data,g=t.r,y=f+g;if(h){if(h.index>l.index){var _=u-h.x-h.vx,p=d-h.y-h.vy,x=_*_+p*p;x<y*y&&(0===_&&(x+=(_=e(r))*_),0===p&&(x+=(p=e(r))*p),x=(y-(x=Math.sqrt(x)))/x*a,l.vx+=(_*=x)*(y=(g*=g)/(c+g)),l.vy+=(p*=x)*y,h.vx-=_*(y=1-y),h.vy-=p*y)}return}return n>u+y||s<u-y||i>d+y||o<d-y}}function h(t){if(t.data)return t.r=s[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(i){var t,e,r=i.length;for(t=0,s=Array(r);t<r;++t)s[(e=i[t]).index]=+n(e,t,i)}}return"function"!=typeof n&&(n=t(null==n?1:+n)),l.initialize=function(t,e){i=t,r=e,u()},l.iterations=function(t){return arguments.length?(o=+t,l):o},l.strength=function(t){return arguments.length?(a=+t,l):a},l.radius=function(e){return arguments.length?(n="function"==typeof e?e:t(+e),u(),l):n},l})().radius(n.collision.radius).strength(n.collision.strength).iterations(n.collision.iterations);this.simulation.force("collide",i)}if(null===n.collision&&this.simulation.force("collide",null),n.manyBody){let i=(function(){var n,i,s,r,a,o=t(-30),l=1,h=1/0,u=.81;function d(t){var e,s=n.length,a=P(n,T,b).visitAfter(c);for(r=t,e=0;e<s;++e)i=n[e],a.visit(g)}function f(){if(n){var t,e,i=n.length;for(t=0,a=Array(i);t<i;++t)a[(e=n[t]).index]=+o(e,t,n)}}function c(t){var e,n,i,s,r,o=0,l=0;if(t.length){for(i=s=r=0;r<4;++r)(e=t[r])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,i+=n*e.x,s+=n*e.y);t.x=i/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do o+=a[e.data.index];while(e=e.next)}t.value=o}function g(t,n,o,d){if(!t.value)return!0;var f=t.x-i.x,c=t.y-i.y,g=d-n,y=f*f+c*c;if(g*g/u<y)return y<h&&(0===f&&(y+=(f=e(s))*f),0===c&&(y+=(c=e(s))*c),y<l&&(y=Math.sqrt(l*y)),i.vx+=f*t.value*r/y,i.vy+=c*t.value*r/y),!0;if(!t.length&&!(y>=h)){(t.data!==i||t.next)&&(0===f&&(y+=(f=e(s))*f),0===c&&(y+=(c=e(s))*c),y<l&&(y=Math.sqrt(l*y)));do t.data!==i&&(g=a[t.data.index]*r/y,i.vx+=f*g,i.vy+=c*g);while(t=t.next)}}return d.initialize=function(t,e){n=t,s=e,f()},d.strength=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),f(),d):o},d.distanceMin=function(t){return arguments.length?(l=t*t,d):Math.sqrt(l)},d.distanceMax=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d.theta=function(t){return arguments.length?(u=t*t,d):Math.sqrt(u)},d})().strength(n.manyBody.strength).theta(n.manyBody.theta).distanceMin(n.manyBody.distanceMin).distanceMax(n.manyBody.distanceMax);this.simulation.force("charge",i)}if(null===n.manyBody&&this.simulation.force("charge",null),null===(i=n.positioning)||void 0===i?void 0:i.forceY){let e=(function(e){var n,i,s,r=t(.1);function a(t){for(var e,r=0,a=n.length;r<a;++r)e=n[r],e.vx+=(s[r]-e.x)*i[r]*t}function o(){if(n){var t,a=n.length;for(t=0,i=Array(a),s=Array(a);t<a;++t)i[t]=isNaN(s[t]=+e(n[t],t,n))?0:+r(n[t],t,n)}}return"function"!=typeof e&&(e=t(null==e?0:+e)),a.initialize=function(t){n=t,o()},a.strength=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),o(),a):r},a.x=function(n){return arguments.length?(e="function"==typeof n?n:t(+n),o(),a):e},a})(n.positioning.forceX.x).strength(n.positioning.forceX.strength);this.simulation.force("x",e)}if((null===(s=n.positioning)||void 0===s?void 0:s.forceX)===null&&this.simulation.force("x",null),null===(r=n.positioning)||void 0===r?void 0:r.forceY){let e=(function(e){var n,i,s,r=t(.1);function a(t){for(var e,r=0,a=n.length;r<a;++r)e=n[r],e.vy+=(s[r]-e.y)*i[r]*t}function o(){if(n){var t,a=n.length;for(t=0,i=Array(a),s=Array(a);t<a;++t)i[t]=isNaN(s[t]=+e(n[t],t,n))?0:+r(n[t],t,n)}}return"function"!=typeof e&&(e=t(null==e?0:+e)),a.initialize=function(t){n=t,o()},a.strength=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),o(),a):r},a.y=function(n){return arguments.length?(e="function"==typeof n?n:t(+n),o(),a):e},a})(n.positioning.forceY.y).strength(n.positioning.forceY.strength);this.simulation.force("y",e)}if((null===(a=n.positioning)||void 0===a?void 0:a.forceY)===null&&this.simulation.force("y",null),n.centering){let t=(function(t,e){var n,i=1;function s(){var s,r,a=n.length,o=0,l=0;for(s=0;s<a;++s)o+=(r=n[s]).x,l+=r.y;for(o=(o/a-t)*i,l=(l/a-e)*i,s=0;s<a;++s)r=n[s],r.x-=o,r.y-=l}return null==t&&(t=0),null==e&&(e=0),s.initialize=function(t){n=t},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(t){return arguments.length?(e=+t,s):e},s.strength=function(t){return arguments.length?(i=+t,s):i},s})(n.centering.x,n.centering.y).strength(n.centering.strength);this.simulation.force("center",t)}null===n.centering&&this.simulation.force("center",null)}runSimulation(t){if(this._isStabilizing)return;(this.settings.isPhysicsEnabled||(null==t?void 0:t.isUpdatingSettings))&&this.releaseNodes(),this.emit(s.SIMULATION_START,void 0),this._isStabilizing=!0,this.simulation.alpha(this.settings.alpha.alpha).alphaTarget(this.settings.alpha.alphaTarget).stop();let e=Math.ceil(Math.log(this.settings.alpha.alphaMin)/Math.log(1-this.settings.alpha.alphaDecay)),n=-1;for(let t=0;t<e;t++){let i=Math.round(100*t/e);i>n&&(n=i,this.emit(s.SIMULATION_PROGRESS,{nodes:this._nodes,edges:this._edges,progress:i/100})),this.simulation.tick()}this.settings.isPhysicsEnabled||this.fixNodes(),this._isStabilizing=!1,this.emit(s.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}setNodeIndexByNodeId(){this._nodeIndexByNodeId={};for(let t=0;t<this._nodes.length;t++)this._nodeIndexByNodeId[this._nodes[t].id]=t}fixNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)W(this._nodes[e])}releaseNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)Z(this._nodes[e])}},tt=t=>{postMessage(t)};$.on(s.TICK,t=>{tt({type:a.NODE_DRAG,data:t})}),$.on(s.END,t=>{tt({type:a.NODE_DRAG_END,data:t})}),$.on(s.SIMULATION_START,()=>{tt({type:a.SIMULATION_START})}),$.on(s.SIMULATION_PROGRESS,t=>{tt({type:a.SIMULATION_PROGRESS,data:t})}),$.on(s.SIMULATION_END,t=>{tt({type:a.SIMULATION_END,data:t})}),$.on(s.NODE_DRAG,t=>{tt({type:a.NODE_DRAG,data:t})}),$.on(s.SETTINGS_UPDATE,t=>{tt({type:a.SETTINGS_UPDATE,data:t})}),addEventListener("message",({data:t})=>{switch(t.type){case r.ActivateSimulation:$.activateSimulation();break;case r.SetData:$.setData(t.data);break;case r.AddData:$.addData(t.data);break;case r.UpdateData:$.updateData(t.data);break;case r.ClearData:$.clearData();break;case r.Simulate:$.simulate();break;case r.StartSimulation:$.startSimulation(t.data);break;case r.UpdateSimulation:$.updateSimulation(t.data);break;case r.StopSimulation:$.stopSimulation();break;case r.StartDragNode:$.startDragNode();break;case r.DragNode:$.dragNode(t.data);break;case r.FixNodes:$.fixNodes(t.data.nodes);break;case r.ReleaseNodes:$.releaseNodes(t.data.nodes);break;case r.EndDragNode:$.endDragNode(t.data);break;case r.SetSettings:$.setSettings(t.data)}})})();
//# sourceMappingURL=process.worker.60a867b5.js.map
